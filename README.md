# ğŸ“¸ CF-TG-Host

> åŸºäº Cloudflare Pages + Telegram Bot API çš„å…è´¹å›¾ç‰‡æ‰˜ç®¡æœåŠ¡

ä¸€ä¸ªç°ä»£åŒ–çš„å›¾ç‰‡æ‰˜ç®¡è§£å†³æ–¹æ¡ˆï¼Œåˆ©ç”¨ Telegram ä½œä¸ºå…è´¹å­˜å‚¨åç«¯ï¼Œé€šè¿‡ Cloudflare Pages æä¾›å¿«é€Ÿã€å¯é çš„å›¾ç‰‡è®¿é—®æœåŠ¡ã€‚

## âœ¨ ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- **å…è´¹æ‰˜ç®¡** - åˆ©ç”¨ Telegram çš„å…è´¹å­˜å‚¨ç©ºé—´
- **å…¨çƒ CDN** - Cloudflare å…¨çƒè¾¹ç¼˜ç½‘ç»œåŠ é€Ÿ
- **æ— é™å®¹é‡** - å— Telegram å­˜å‚¨é™åˆ¶ï¼ˆå®é™…ä¸Šå‡ ä¹æ— é™ï¼‰
- **é«˜é€Ÿè®¿é—®** - æ™ºèƒ½ç¼“å­˜ + è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–
- **å®‰å…¨å¯é ** - ä¸¥æ ¼çš„é˜²ç›—é“¾ä¿æŠ¤

### ğŸ¨ ç”¨æˆ·ç•Œé¢

- **ç°ä»£åŒ–è®¾è®¡** - React + TypeScript + Tailwind CSS
- **å“åº”å¼å¸ƒå±€** - å®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢
- **ç€‘å¸ƒæµå±•ç¤º** - çº¯ CSS Columns å®ç°ï¼Œæ€§èƒ½å“è¶Š
- **æ— é™æ»šåŠ¨** - æµç•…çš„æµè§ˆä½“éªŒ

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- **é˜²ç›—é“¾ä¿æŠ¤** - åŸºäº Referer çš„è®¿é—®æ§åˆ¶
- **ç®¡ç†å‘˜è®¤è¯** - å®‰å…¨çš„åå°ç®¡ç†
- **ç¼“å­˜æ§åˆ¶** - æ™ºèƒ½ç¼“å­˜ç­–ç•¥
- **è®¿é—®æ—¥å¿—** - å®Œæ•´çš„è®¿é—®è®°å½•

## ğŸ“± ç•Œé¢å±•ç¤º

### ğŸ” ç™»å½•ç•Œé¢

![ç™»å½•ç•Œé¢](./screenshots/login.png)

ç®€æ´çš„ç®¡ç†å‘˜è®¤è¯ç•Œé¢ï¼Œä¿éšœç³»ç»Ÿå®‰å…¨

### ğŸ  é¦–é¡µ - å›¾ç‰‡ä¸Šä¼ ç•Œé¢

![é¦–é¡µä¸Šä¼ ç•Œé¢](./screenshots/homepage.png)

æ‹–æ‹½ä¸Šä¼ ã€æ‰¹é‡å¤„ç†ã€å®æ—¶è¿›åº¦æ˜¾ç¤º

### ğŸ–¼ï¸ å›¾ç‰‡åº“ - ç€‘å¸ƒæµå±•ç¤º

![å›¾ç‰‡åº“ç•Œé¢](./screenshots/gallery.png)

å“åº”å¼ç€‘å¸ƒæµå¸ƒå±€ï¼Œå®Œç¾é€‚é…å„ç§å±å¹•å°ºå¯¸

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ

```text
React 18 + TypeScript
â”œâ”€â”€ æ„å»ºå·¥å…·ï¼šVite
â”œâ”€â”€ æ ·å¼æ¡†æ¶ï¼šTailwind CSS
â”œâ”€â”€ è·¯ç”±ç®¡ç†ï¼šReact Router
â”œâ”€â”€ çŠ¶æ€ç®¡ç†ï¼šReact Hooks
â””â”€â”€ å¸ƒå±€æ–¹æ¡ˆï¼šCSS Columns (ç€‘å¸ƒæµ)
```

### åç«¯æ¶æ„

```text
Cloudflare Pages Functions
â”œâ”€â”€ è¿è¡Œæ—¶ï¼šNode.js Edge Runtime
â”œâ”€â”€ å­˜å‚¨ï¼šCloudflare KV (å…ƒæ•°æ®)
â”œâ”€â”€ ç¼“å­˜ï¼šCloudflare Cache API
â”œâ”€â”€ CDNï¼šCloudflare Global Network
â””â”€â”€ å›¾ç‰‡æºï¼šTelegram Bot API
```

### éƒ¨ç½²æ–¹æ¡ˆ

```text
Cloudflare Pages
â”œâ”€â”€ è‡ªåŠ¨æ„å»ºï¼šGitHub Actions
â”œâ”€â”€ è¾¹ç¼˜å‡½æ•°ï¼šPages Functions
â”œâ”€â”€ å…¨çƒåˆ†å‘ï¼š200+ æ•°æ®ä¸­å¿ƒ
â”œâ”€â”€ è‡ªå®šä¹‰åŸŸåï¼šå…è´¹ SSL è¯ä¹¦
â””â”€â”€ ç¯å¢ƒå˜é‡ï¼šå®‰å…¨é…ç½®ç®¡ç†
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡å·¥ä½œ

**åˆ›å»º Telegram Botï¼š**

1. è”ç³» [@BotFather](https://t.me/BotFather) åˆ›å»º Bot
2. è·å– Bot Token
3. å°† Bot æ·»åŠ åˆ°ç›®æ ‡é¢‘é“å¹¶è®¾ä¸ºç®¡ç†å‘˜

**å‡†å¤‡ Cloudflare è´¦å·ï¼š**

1. æ³¨å†Œ [Cloudflare](https://cloudflare.com) è´¦å·
2. åˆ›å»º Pages é¡¹ç›®
3. é…ç½® KV å‘½åç©ºé—´

### 2. æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/llnancy/cf-tg-host.git
cd cf-tg-host

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 3. ç¯å¢ƒé…ç½®

åœ¨ Cloudflare Pages ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
# Telegram Bot é…ç½®
TG_Bot_Token=your_bot_token_here          # ä» @BotFather è·å–çš„ Bot Token
TG_Chat_ID=your_channel_id_here           # Telegram é¢‘é“æˆ–ç¾¤ç»„ ID (ä»¥ -100 å¼€å¤´)

# ç®¡ç†å‘˜è®¤è¯
ADMIN_USERNAME=admin                      # ç®¡ç†å‘˜ç™»å½•ç”¨æˆ·å
ADMIN_PASSWORD=your_admin_password        # ç®¡ç†å‘˜ç™»å½•å¯†ç 
SESSION_SECRET=your_session_secret        # JWT ä¼šè¯åŠ å¯†å¯†é’¥ (éšæœºå­—ç¬¦ä¸²)

# KV å­˜å‚¨ç»‘å®š
img_url=your_kv_namespace_binding         # Cloudflare KV å‘½åç©ºé—´ç»‘å®šåç§°

# é˜²ç›—é“¾é…ç½® (å¯é€‰)
ALLOWED_ORIGINS=yourdomain.com,localhost  # å…è®¸è®¿é—®çš„åŸŸååˆ—è¡¨ï¼Œé€—å·åˆ†éš”

# Cloudflare API (å¯é€‰ï¼Œç”¨äºç¼“å­˜æ¸…ç†)
CF_API_TOKEN=your_cf_api_token            # Cloudflare API Token (éœ€è¦ Zone:Cache Purge æƒé™)
CF_ZONE_ID=your_zone_id                   # Cloudflare Zone ID
```

### 4. éƒ¨ç½²åˆ° Cloudflare Pages

```bash
# è¿æ¥åˆ° GitHub ä»“åº“
# Cloudflare Pages ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²
# æ„å»ºè®¾ç½®
# æ„å»ºå‘½ä»¤ï¼šnpm run build
# æ„å»ºè¾“å‡ºç›®å½•ï¼šfrontend/dist

# ç»‘å®š KV å‘½åç©ºé—´ï¼Œå˜é‡åç§°å›ºå®š img_url

# æˆ–ä½¿ç”¨ Wrangler CLI
npm install -g wrangler
wrangler pages publish frontend/dist
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å›¾ç‰‡ä¸Šä¼ 

1. è®¿é—®ç®¡ç†é¡µé¢å¹¶ç™»å½•
2. æ‹–æ‹½æˆ–é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
3. è‡ªåŠ¨ä¸Šä¼ åˆ° Telegram å¹¶ç”Ÿæˆé“¾æ¥
4. å¤åˆ¶ç›´é“¾ç”¨äºå¤–éƒ¨å¼•ç”¨

### å›¾ç‰‡ç®¡ç†

- **æµè§ˆå›¾ç‰‡** - ç€‘å¸ƒæµå±•ç¤ºæ‰€æœ‰å›¾ç‰‡
- **å¤åˆ¶é“¾æ¥** - ä¸€é”®å¤åˆ¶å›¾ç‰‡ç›´é“¾
- **åˆ é™¤å›¾ç‰‡** - ä» KV å­˜å‚¨å’Œç¼“å­˜ä¸­åˆ é™¤ï¼ˆæ³¨ï¼šä¸ä¼šåˆ é™¤ Telegram åŸæ–‡ä»¶ï¼‰

### API æ¥å£

**ä¸Šä¼ å›¾ç‰‡ï¼š**

```http
POST /api/upload
Content-Type: multipart/form-data

{
  "file": <image_file>
}
```

**è·å–å›¾ç‰‡åˆ—è¡¨ï¼š**

```http
GET /api/files?limit=10&cursor=xxx
```

**åˆ é™¤å›¾ç‰‡ï¼š**

```http
DELETE /api/files/{file_id}
```

**è®¿é—®å›¾ç‰‡ï¼š**

```http
GET /file/{file_id}
```

## âš ï¸ ä½¿ç”¨é™åˆ¶

### å…è´¹é¢åº¦ä¸å½±å“

| ç±»å‹        | å…è´¹é¢åº¦      | è¶…é™å½±å“                 |
| ----------- | ------------- | ------------------------ |
| Pages è¯·æ±‚  | 100,000 æ¬¡/å¤© | ç½‘ç«™æ— æ³•è®¿é—®             |
| Pages æ„å»º  | 3,000 åˆ†é’Ÿ/æœˆ | æ— æ³•éƒ¨ç½²æ›´æ–°             |
| KV å­˜å‚¨ç©ºé—´ | 1 GB          | æ— æ³•å­˜å‚¨æ–°æ•°æ®           |
| KV è¯»å–     | 100,000 æ¬¡/æ—¥ | é˜²ç›—é“¾ã€ç®¡ç†åŠŸèƒ½å¯èƒ½å¤±æ•ˆ |
| KV å†™å…¥     | 1,000 æ¬¡/æ—¥   | æ–°å›¾ç‰‡æ— æ³•è®°å½•åˆ°ç®¡ç†åå° |
| KV åˆ é™¤     | 1,000 æ¬¡/æ—¥   | æ— æ³•åˆ é™¤å›¾ç‰‡è®°å½•         |
| KV åˆ—è¡¨     | 1,000 æ¬¡/æ—¥   | æ— æ³•è¿›è¡Œåå°ç®¡ç†         |

> ğŸ’¡ **è¯´æ˜ï¼š**å„é¡¹é¢åº¦ç‹¬ç«‹è®¡ç®—ï¼Œè¶…é™åä»…å½±å“å¯¹åº”åŠŸèƒ½ã€‚ç»å¤§å¤šæ•°æƒ…å†µä¸‹å…è´¹é¢åº¦éƒ½å¤Ÿç”¨ï¼Œä¸”å¯ç¨å¾®è¶…å‡ºã€‚
> ğŸ’¡ **å»ºè®®ï¼š**å¯¹äºé«˜é¢‘ä½¿ç”¨åœºæ™¯ï¼Œå»ºè®®å‡çº§åˆ° Cloudflare ä»˜è´¹å¥—é¤æˆ–è€ƒè™‘ä½¿ç”¨å…¶ä»–å­˜å‚¨æ–¹æ¡ˆã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª ESLint ä»£ç è§„èŒƒ
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼å†™æ³•
- ä¼˜å…ˆä½¿ç”¨ React Hooks

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [Telegram Bot API](https://core.telegram.org/bots/api) - æä¾›å…è´¹å­˜å‚¨æœåŠ¡
- [Cloudflare Pages](https://pages.cloudflare.com/) - æä¾›å…¨çƒ CDN å’Œè¾¹ç¼˜è®¡ç®—
- [React](https://reactjs.org/) - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ** - [GitHub Repository](https://github.com/llnancy/cf-tg-host)
- **é—®é¢˜åé¦ˆ** - [GitHub Issues](https://github.com/llnancy/cf-tg-host/issues)
- **åŠŸèƒ½å»ºè®®** - [GitHub Discussions](https://github.com/llnancy/cf-tg-host/discussions)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼
